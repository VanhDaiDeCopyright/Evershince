define(["ko", "jquery", "Magento_Ui/js/model/messageList"], function (
  ko,
  $,
  globalMessages
) {
  "use strict";
  return function (target) {
    return target.extend({
      initialize: function (config, messageContainer) {
        this._super().initObservable();
        this.messageContainer =
          messageContainer || config.messageContainer || globalMessages;
        return this;
      },
      isVisible: function () {
        if ($(".checkout-index-index").length) {
          return this.isHidden(false);
        } else {
          return this.isHidden(this.messageContainer.hasMessages());
        }
      },
    });
  };
});
